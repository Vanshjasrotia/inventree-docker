import{ag as N,ao as l,r as o,j as t,b5 as n,bc as r,ab as a,c8 as y,an as M,aO as s,S as F,aD as w}from"./index-DO3Hsv6V.js";import{j as R,e as T,c as U,q as f}from"./Filter-BvEUIFlz.js";import{A as q}from"./AdminButton-CTeciGXm.js";import{I as K,D as d,a as $}from"./InstanceDetail-BstmafrN.js";import{D as c}from"./DetailsBadge-sHNY-n9a.js";import{D as O,A as Q,N as X}from"./NotesPanel-VH2wpJwF.js";import{B as z,O as B,b as Y,E as G,D as W}from"./InvenTreeTable-C52lfANx.js";import{P as Z}from"./PageDetail-CKIqCwOW.js";import{P as J}from"./PanelGroup-DXB_Pzm0.js";import{a as L}from"./CompanyForms-DsVXw3Bg.js";import{u as V}from"./UseInstance-DbCdugSa.js";import{P as H}from"./PurchaseOrderTable-DzB3kwN4.js";import{S as ee}from"./SupplierPriceBreakTable-xTXFLXHk.js";import{S as ae}from"./StockItemTable-CaVBJXX_.js";import{a1 as te,a as ie,y as re,k as pe,p as se,Z as le}from"./ThemeContext-CGjWYKat.js";import"./DesktopAppView-Bz_M7PvN.js";import"./ActionButton-B71_UNIq.js";import"./index-B0vyf6qM.js";import"./YesNoButton-COjRQttb.js";import"./formatters-t5SuiB19.js";import"./ModelType-DvEnjMmO.js";import"./GenericErrorPage-DxYcKmpr.js";import"./NotFound-BpMmyLUk.js";import"./PermissionDenied-CwPe-5Cn.js";import"./use-hover-DV0QPCnC.js";import"./index-Chjiymov.js";import"./AttachmentLink-Nv2Vdpsp.js";import"./IconChevronDown-XhYR5VVP.js";import"./QRCode-D-HsAD7c.js";import"./browser-4FjMziNK.js";import"./IconDotsVertical-B3NOsJOQ.js";import"./IconTags-3mllzNAC.js";import"./PageTitle-BblRCqjC.js";import"./PluginUIFeature-r-ecmONx.js";import"./RemoteComponent-RGte6E6x.js";import"./IconAt-CdV2rdTD.js";import"./OrderPartsWizard-CSVtVPb4.js";import"./IconUsers-_4Wxu47r.js";import"./IconAddressBook-BXunpTP_.js";import"./ColumnRenderers-B590lN_v.js";import"./UseStockAdjustActions-BtnC3twz.js";function Ze(){const{id:g}=te(),p=N(),x=ie(),{instance:e,instanceQuery:m,refreshInstance:_}=V({endpoint:l.supplier_part_list,pk:g,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0}}),j=o.useMemo(()=>{if(m.isFetching)return t.jsx(n,{});const i=e??{};i.manufacturer=i.manufacturer_detail?.pk,i.MPN=i.manufacturer_part_detail?.MPN,i.manufacturer_part=i.manufacturer_part_detail?.pk;const A=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:r.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:a._({id:"3wXEsN"}),copy:!0,hidden:!i.part_detail?.IPN,icon:"serial"},{type:"string",name:"part_detail.description",label:a._({id:"5ZWiLz"}),copy:!0,icon:"info",hidden:!i.part_detail?.description},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:a._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],E=[{type:"link",name:"supplier",label:a._({id:"PYTEl0"}),model:r.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:a._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!i.description},{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),model:r.company,icon:"manufacturers",hidden:!i.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:a._({id:"bisS0I"}),model:r.manufacturerpart,icon:"reference",hidden:!i.manufacturer_part}],v=[{type:"string",name:"packaging",label:a._({id:"pD/Ew0"}),copy:!0,hidden:!i.packaging},{type:"string",name:"pack_quantity",label:a._({id:"J9LTXQ"}),copy:!0,hidden:!i.pack_quantity,icon:"packages"}],C=[{type:"number",name:"in_stock",label:a._({id:"zn38D/"}),copy:!0,icon:"stock"},{type:"number",name:"on_order",label:a._({id:"0lg3zX"}),copy:!0,icon:"purchase_orders"},{type:"number",name:"available",label:a._({id:"WrzEdW"}),hidden:!i.availability_updated,copy:!0,icon:"packages"},{type:"date",name:"availability_updated",label:a._({id:"Qeo1xd"}),copy:!0,hidden:!i.availability_updated,icon:"calendar"}];return t.jsxs(K,{children:[t.jsxs(y,{grow:!0,children:[t.jsx(O,{appRole:s.part,src:e?.part_detail?.image,apiPath:M(l.part_list,e?.part_detail?.pk),pk:e?.part_detail?.pk}),t.jsx(y.Col,{span:8,children:t.jsx(d,{title:a._({id:"sQRZ1+"}),fields:A,item:i})})]}),t.jsx(d,{title:a._({id:"PYTEl0"}),fields:E,item:i}),t.jsx(d,{title:a._({id:"pD/Ew0"}),fields:v,item:i}),t.jsx(d,{title:a._({id:"lXkUEV"}),fields:C,item:i})]})},[e,m.isFetching]),P=o.useMemo(()=>[{name:"details",label:a._({id:"F+J5VC"}),icon:t.jsx(re,{}),content:j},{name:"stock",label:a._({id:"b447qM"}),icon:t.jsx(pe,{}),content:e?.pk?t.jsx(ae,{tableName:"supplier-stock",allowAdd:!1,params:{supplier_part:e.pk}}):t.jsx(n,{})},{name:"purchaseorders",label:a._({id:"85Yvr2"}),icon:t.jsx(se,{}),content:e?.pk?t.jsx(H,{supplierId:e.supplier,supplierPartId:e.pk}):t.jsx(n,{})},{name:"pricing",label:a._({id:"OQkyYP"}),icon:t.jsx(le,{}),content:e?.pk?t.jsx(ee,{supplierPart:e}):t.jsx(n,{})},Q({model_type:r.supplierpart,model_id:e?.pk}),X({model_type:r.supplierpart,model_id:e?.pk})],[e]),D=o.useMemo(()=>[t.jsx(q,{model:r.supplierpart,id:e.pk}),t.jsx(z,{model:r.supplierpart,pk:e.pk,hash:e.barcode_hash,perm:p.hasChangeRole(s.purchase_order)}),t.jsx(B,{tooltip:a._({id:"XIY/fv"}),actions:[Y({hidden:!p.hasAddRole(s.purchase_order),onClick:()=>h.open()}),G({hidden:!p.hasChangeRole(s.purchase_order),onClick:()=>u.open()}),W({hidden:!p.hasDeleteRole(s.purchase_order),onClick:()=>k.open()})]})],[p,e]),b=L({}),u=R({url:l.supplier_part_list,pk:e?.pk,title:a._({id:"qZstuw"}),fields:b,onFormSuccess:_}),k=T({url:l.supplier_part_list,pk:e?.pk,title:a._({id:"9Qoago"}),onFormSuccess:()=>{x(w(r.part,e.part))}}),h=U({url:l.supplier_part_list,title:a._({id:"EREF+D"}),fields:b,initialData:{...e},follow:!0,modelType:r.supplierpart}),I=o.useMemo(()=>[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:e?.supplier_detail?.name??a._({id:"PYTEl0"}),url:`/purchasing/supplier/${e?.supplier_detail?.pk??""}`}],[e]),S=o.useMemo(()=>[t.jsx(c,{label:a._({id:"NoNwIX"}),color:"red",visible:e.active==!1}),t.jsx(c,{label:`${a._({id:"zn38D/"})}: ${f(e.in_stock)}`,color:"green",visible:e?.active&&e?.in_stock&&e?.in_stock>0},"in_stock"),t.jsx(c,{label:a._({id:"COcNhC"}),color:"red",visible:e.active&&e.in_stock==0},"no_stock"),t.jsx(c,{label:`${a._({id:"0lg3zX"})}: ${f(e.on_order)}`,color:"blue",visible:e.on_order>0},"on_order")],[e]);return t.jsxs(t.Fragment,{children:[k.modal,h.modal,u.modal,t.jsx($,{query:m,requiredRole:s.purchase_order,children:t.jsxs(F,{gap:"xs",children:[t.jsx(Z,{title:a._({id:"nne72x"}),subtitle:`${e.SKU} - ${e?.part_detail?.name}`,breadcrumbs:I,lastCrumb:[{name:e.SKU,url:`/purchasing/supplier-part/${e.pk}/`}],badges:S,actions:D,imageUrl:e?.part_detail?.thumbnail,editAction:u.open,editEnabled:p.hasChangePermission(r.supplierpart)}),t.jsx(J,{pageKey:"supplierpart",panels:P,instance:e,reloadInstance:_,model:r.supplierpart,id:e.pk})]})})]})}export{Ze as default};
//# sourceMappingURL=SupplierPartDetail-B3X72T6W.js.map
