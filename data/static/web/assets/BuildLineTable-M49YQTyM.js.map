{"version":3,"file":"BuildLineTable-M49YQTyM.js","sources":["../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconWand.mjs","../../../../../../frontend/src/tables/part/PartTestResultTable.tsx","../../../../../../frontend/src/tables/build/BuildLineTable.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M6 21l15 -15l-3 -3l-15 15l3 3\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M15 6l3 3\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\", \"key\": \"svg-3\" }]];\nconst IconWand = createReactComponent(\"outline\", \"wand\", \"Wand\", __iconNode);\n\nexport { __iconNode, IconWand as default };\n//# sourceMappingURL=IconWand.mjs.map\n","import { t } from '@lingui/core/macro';\nimport { ActionIcon, Badge, Group, Text, Tooltip } from '@mantine/core';\nimport { IconCirclePlus } from '@tabler/icons-react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  type ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState\n} from 'react';\n\nimport { PassFailButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { apiUrl } from '@lib/functions/Api';\nimport { cancelEvent } from '@lib/functions/Events';\nimport { AddItemButton } from '@lib/index';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport type { UseFormReturn } from 'react-hook-form';\nimport { RenderUser } from '../../components/render/User';\nimport { useApi } from '../../contexts/ApiContext';\nimport { formatDate } from '../../defaults/formatters';\nimport { useTestResultFields } from '../../forms/StockForms';\nimport { useCreateApiFormModal } from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { LocationColumn, PartColumn } from '../ColumnRenderers';\nimport {\n  BatchFilter,\n  HasBatchCodeFilter,\n  InStockFilter,\n  IsSerializedFilter,\n  SerialFilter,\n  SerialGTEFilter,\n  SerialLTEFilter,\n  StatusFilterOptions\n} from '../Filter';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport { TableHoverCard } from '../TableHoverCard';\n\n/**\n * A table which displays all \"test results\" for the outputs generated by a build order.\n */\nexport default function PartTestResultTable({\n  buildId,\n  partId\n}: Readonly<{\n  buildId?: number;\n  partId: number;\n}>) {\n  const tableName = useMemo(() => {\n    if (buildId) {\n      return 'build-test-results';\n    } else {\n      return 'part-test-results';\n    }\n  }, [buildId]);\n\n  const table = useTable(tableName);\n  const api = useApi();\n\n  // Fetch the test templates required for this build order\n  const { data: testTemplates } = useQuery({\n    queryKey: ['build-test-templates', partId, buildId],\n    queryFn: async () => {\n      if (!partId) {\n        return [];\n      }\n\n      return api\n        .get(apiUrl(ApiEndpoints.part_test_template_list), {\n          params: {\n            part: partId,\n            include_inherited: true,\n            enabled: true,\n            required: true\n          }\n        })\n        .then((res) => res.data);\n    }\n  });\n\n  // Reload the table data whenever the set of templates changes\n  useEffect(() => {\n    table.refreshTable();\n  }, [testTemplates]);\n\n  const [selectedOutput, setSelectedOutput] = useState<number>(0);\n  const [selectedTemplate, setSelectedTemplate] = useState<number | undefined>(\n    undefined\n  );\n\n  const testResultFields: ApiFormFieldSet = useTestResultFields({\n    partId: partId,\n    itemId: selectedOutput,\n    templateId: selectedTemplate\n  });\n\n  const createTestResult = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_test_result_list),\n    title: t`Add Test Result`,\n    fields: testResultFields,\n    initialData: {\n      template: selectedTemplate,\n      result: true\n    },\n    onFormSuccess: () => table.refreshTable(),\n    successMessage: t`Test result added`\n  });\n\n  const multipleTestResultFields: ApiFormFieldSet = useMemo(() => {\n    const fields: ApiFormFieldSet = { ...testResultFields };\n\n    // Do not allow attachment for multiple test results\n    delete fields.attachment;\n    delete fields.stock_item;\n\n    fields.template.disabled = false;\n\n    return fields;\n  }, [partId, testResultFields]);\n\n  const generateTestResults = useCallback(\n    (data: any, form: UseFormReturn) => {\n      // Generate a list of test results for each selected output\n      const results = table.selectedRecords.map((record: any) => {\n        return {\n          ...data,\n          stock_item: record.pk\n        };\n      });\n\n      return results;\n    },\n    [table.selectedIds]\n  );\n\n  const createTestResultMultiple = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_test_result_list),\n    title: t`Add Test Results`,\n    fields: multipleTestResultFields,\n    initialData: {\n      result: true\n    },\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    },\n    processFormData: generateTestResults,\n    successMessage: t`Test results added`\n  });\n\n  // Generate a table column for each test template\n  const testColumns: TableColumn[] = useMemo(() => {\n    if (!testTemplates || testTemplates.length == 0) {\n      return [];\n    }\n\n    return testTemplates.map((template: any) => {\n      return {\n        accessor: `test_${template.pk}`,\n        title: template.test_name,\n        sortable: false,\n        switchable: true,\n        render: (record: any) => {\n          const tests = record.tests || [];\n\n          // Find the most recent test result (highest primary key)\n          const test = tests\n            .filter((test: any) => test.template == template.pk)\n            .sort((a: any, b: any) => b.pk - a.pk)\n            .shift();\n\n          // No test result recorded\n          if (!test || test.result === undefined) {\n            return (\n              <Group gap='xs' wrap='nowrap' justify='space-between'>\n                <Badge color='lightblue' variant='filled'>{t`No Result`}</Badge>\n                <Tooltip label={t`Add Test Result`}>\n                  <ActionIcon\n                    size='lg'\n                    color='green'\n                    aria-label='add-test-result'\n                    variant='transparent'\n                    onClick={(event: any) => {\n                      cancelEvent(event);\n                      setSelectedOutput(record.pk);\n                      setSelectedTemplate(template.pk);\n                      createTestResult.open();\n                    }}\n                  >\n                    <IconCirclePlus />\n                  </ActionIcon>\n                </Tooltip>\n              </Group>\n            );\n          }\n\n          const extra: ReactNode[] = [];\n\n          if (test.value) {\n            extra.push(\n              <Text key='value' size='sm'>\n                {t`Value`}: {test.value}\n              </Text>\n            );\n          }\n\n          if (test.notes) {\n            extra.push(\n              <Text key='notes' size='sm'>\n                {t`Notes`}: {test.notes}\n              </Text>\n            );\n          }\n\n          if (test.date) {\n            extra.push(\n              <Text key='date' size='sm'>\n                {t`Date`}: {formatDate(test.date)}\n              </Text>\n            );\n          }\n\n          if (test.user_detail) {\n            extra.push(<RenderUser key='user' instance={test.user_detail} />);\n          }\n\n          return (\n            <TableHoverCard\n              value={<PassFailButton value={test.result} />}\n              title={template.test_name}\n              extra={extra}\n            />\n          );\n        }\n      };\n    });\n  }, [testTemplates]);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    // Fixed columns\n    const columns: TableColumn[] = [\n      PartColumn({\n        title: t`Part`,\n        part: 'part_detail',\n        full_name: true,\n        ordering: 'part',\n        sortable: true,\n        switchable: true\n      }),\n      {\n        accessor: 'stock',\n        title: t`Stock Item`,\n        sortable: true,\n        switchable: false,\n        render: (record: any) => {\n          if (record.serial) {\n            return `# ${record.serial}`;\n          } else {\n            const extra: ReactNode[] = [];\n\n            if (record.batch) {\n              extra.push(\n                <Text key='batch' size='sm'>\n                  {t`Batch Code`}: {record.batch}\n                </Text>\n              );\n            }\n\n            return (\n              <TableHoverCard\n                value={\n                  <Text>\n                    {t`Quantity`}: {record.quantity}\n                  </Text>\n                }\n                title={t`Build Output`}\n                extra={extra}\n              />\n            );\n          }\n        }\n      },\n      {\n        accessor: 'batch',\n        title: t`Batch Code`,\n        sortable: true,\n        switchable: true\n      },\n      LocationColumn({\n        accessor: 'location_detail'\n      })\n    ];\n\n    return [...columns, ...testColumns];\n  }, [testColumns]);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'is_building',\n        label: t`In Production`,\n        description: t`Show build outputs currently in production`\n      },\n      InStockFilter(),\n      SerialFilter(),\n      SerialGTEFilter(),\n      SerialLTEFilter(),\n      HasBatchCodeFilter(),\n      BatchFilter(),\n      IsSerializedFilter(),\n      {\n        name: 'status',\n        label: t`Status`,\n        description: t`Filter by stock status`,\n        choiceFunction: StatusFilterOptions(ModelType.stockitem)\n      }\n    ];\n  }, []);\n\n  const tableActions = useMemo(() => {\n    return [\n      <AddItemButton\n        key='add-test-result'\n        tooltip={t`Add Test Result`}\n        disabled={!table.hasSelectedRecords}\n        onClick={(event: any) => {\n          createTestResultMultiple.open();\n        }}\n      />\n    ];\n  }, [table.hasSelectedRecords]);\n\n  const rowActions = useCallback((record: any) => {\n    return [\n      {\n        icon: <IconCirclePlus />,\n        color: 'green',\n        title: t`Add Test Result`,\n        onClick: (event: any) => {\n          setSelectedOutput(record.pk);\n          setSelectedTemplate(undefined);\n          createTestResult.open();\n        }\n      }\n    ];\n  }, []);\n\n  return (\n    <>\n      {createTestResult.modal}\n      {createTestResultMultiple.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.stock_item_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          params: {\n            part_detail: true,\n            location_detail: true,\n            tests: true,\n            part: partId,\n            build: buildId\n          },\n          enableSelection: true,\n          rowActions: rowActions,\n          tableFilters: tableFilters,\n          tableActions: tableActions,\n          modelType: ModelType.stockitem\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Alert, Group, Paper, Text } from '@mantine/core';\nimport {\n  IconArrowRight,\n  IconCircleCheck,\n  IconCircleDashedCheck,\n  IconCircleMinus,\n  IconShoppingCart,\n  IconTool,\n  IconWand\n} from '@tabler/icons-react';\nimport type { DataTableRowExpansionProps } from 'mantine-datatable';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { ProgressBar } from '@lib/components/ProgressBar';\nimport {\n  RowDeleteAction,\n  RowEditAction,\n  RowViewAction\n} from '@lib/components/RowActions';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport { formatDecimal } from '@lib/functions/Formatting';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { RowAction, TableColumn } from '@lib/types/Tables';\nimport OrderPartsWizard from '../../components/wizards/OrderPartsWizard';\nimport {\n  useAllocateStockToBuildForm,\n  useBuildOrderFields,\n  useConsumeBuildLinesForm\n} from '../../forms/BuildForms';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport useStatusCodes from '../../hooks/UseStatusCodes';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport {\n  BooleanColumn,\n  DecimalColumn,\n  DescriptionColumn,\n  LocationColumn,\n  PartColumn,\n  RenderPartColumn\n} from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport RowExpansionIcon from '../RowExpansionIcon';\nimport { TableHoverCard } from '../TableHoverCard';\n\n/**\n * Render a sub-table of allocated stock against a particular build line.\n *\n * - Renders a simplified table of stock allocated against the build line\n * - Provides \"edit\" and \"delete\" actions for each allocation\n *\n * Note: We expect that the \"lineItem\" object contains an allocations[] list\n */\nexport function BuildLineSubTable({\n  lineItem,\n  onEditAllocation,\n  onDeleteAllocation\n}: Readonly<{\n  lineItem: any;\n  onEditAllocation?: (pk: number) => void;\n  onDeleteAllocation?: (pk: number) => void;\n}>) {\n  const user = useUserState();\n  const navigate = useNavigate();\n  const table = useTable('buildline-subtable');\n\n  const tableColumns: any[] = useMemo(() => {\n    return [\n      PartColumn({\n        part: 'part_detail'\n      }),\n      {\n        accessor: 'quantity',\n        title: t`Quantity`,\n        render: (record: any) => {\n          if (!!record.stock_item_detail?.serial) {\n            return `# ${record.stock_item_detail.serial}`;\n          }\n          return record.quantity;\n        }\n      },\n      {\n        accessor: 'stock_item_detail.batch',\n        title: t`Batch`\n      },\n      LocationColumn({\n        accessor: 'location_detail'\n      })\n    ];\n  }, []);\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      return [\n        RowViewAction({\n          title: t`View Stock Item`,\n          modelType: ModelType.stockitem,\n          modelId: record.stock_item,\n          navigate: navigate\n        }),\n        RowEditAction({\n          hidden: !onEditAllocation || !user.hasChangeRole(UserRoles.build),\n          onClick: () => {\n            onEditAllocation?.(record.pk);\n          }\n        }),\n        RowDeleteAction({\n          hidden: !onDeleteAllocation || !user.hasDeleteRole(UserRoles.build),\n          onClick: () => {\n            onDeleteAllocation?.(record.pk);\n          }\n        })\n      ];\n    },\n    [user, onEditAllocation, onDeleteAllocation]\n  );\n\n  return (\n    <Paper p='xs'>\n      <InvenTreeTable\n        tableState={table}\n        columns={tableColumns}\n        tableData={lineItem.filteredAllocations ?? lineItem.allocations}\n        props={{\n          minHeight: 200,\n          enableSearch: false,\n          enableRefresh: false,\n          enableColumnSwitching: false,\n          enableFilters: false,\n          rowActions: rowActions,\n          noRecordsText: ''\n        }}\n      />\n    </Paper>\n  );\n}\n\n/**\n * Render a table of build lines for a particular build.\n */\nexport default function BuildLineTable({\n  build,\n  output,\n  params = {}\n}: Readonly<{\n  build: any;\n  output?: any;\n  params?: any;\n}>) {\n  const user = useUserState();\n  const navigate = useNavigate();\n  const buildStatus = useStatusCodes({ modelType: ModelType.build });\n\n  const hasOutput: boolean = useMemo(() => !!output?.pk, [output]);\n\n  const table = useTable(hasOutput ? 'buildline-output' : 'buildline');\n\n  const isActive: boolean = useMemo(() => {\n    return (\n      build?.status == buildStatus.PRODUCTION ||\n      build?.status == buildStatus.PENDING ||\n      build?.status == buildStatus.ON_HOLD\n    );\n  }, [build, buildStatus]);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'allocated',\n        label: t`Allocated`,\n        description: t`Show fully allocated lines`\n      },\n      {\n        name: 'consumed',\n        label: t`Consumed`,\n        description: t`Show fully consumed lines`\n      },\n      {\n        name: 'available',\n        label: t`Available`,\n        description: t`Show items with available stock`\n      },\n      {\n        name: 'consumable',\n        label: t`Consumable`,\n        description: t`Show consumable lines`\n      },\n      {\n        name: 'optional',\n        label: t`Optional`,\n        description: t`Show optional lines`\n      },\n      {\n        name: 'assembly',\n        label: t`Assembly`,\n        description: t`Show assembled items`\n      },\n      {\n        name: 'testable',\n        label: t`Testable`,\n        description: t`Show testable items`\n      },\n      {\n        name: 'tracked',\n        label: t`Tracked`,\n        description: t`Show tracked lines`\n      }\n    ];\n  }, []);\n\n  const renderAvailableColumn = useCallback((record: any) => {\n    const bom_item = record?.bom_item_detail ?? {};\n    const extra: any[] = [];\n    let available = record?.available_stock;\n\n    // Account for substitute stock\n    if (record.available_substitute_stock > 0) {\n      available += record.available_substitute_stock;\n      extra.push(\n        <Text key='substitite' size='sm'>\n          {t`Includes substitute stock`}\n        </Text>\n      );\n    }\n\n    // Account for variant stock\n    if (bom_item.allow_variants && record.available_variant_stock > 0) {\n      available += record.available_variant_stock;\n      extra.push(\n        <Text key='variant' size='sm'>\n          {t`Includes variant stock`}\n        </Text>\n      );\n    }\n\n    // Account for in-production stock\n    if (record.in_production > 0) {\n      extra.push(\n        <Text key='production' size='sm'>\n          {t`In production`}: {formatDecimal(record.in_production)}\n        </Text>\n      );\n    }\n\n    // Account for stock on order\n    if (record.on_order > 0) {\n      extra.push(\n        <Text key='on-order' size='sm'>\n          {t`On order`}: {formatDecimal(record.on_order)}\n        </Text>\n      );\n    }\n\n    // Account for \"external\" stock\n    if (record.external_stock > 0) {\n      extra.push(\n        <Text key='external' size='sm'>\n          {t`External stock`}: {formatDecimal(record.external_stock)}\n        </Text>\n      );\n    }\n\n    const sufficient = available >= record.quantity - record.allocated;\n\n    if (!sufficient) {\n      extra.push(\n        <Text key='insufficient' c='orange' size='sm'>\n          {t`Insufficient stock`}\n        </Text>\n      );\n    }\n\n    return (\n      <TableHoverCard\n        icon={sufficient ? 'info' : 'exclamation'}\n        iconColor={sufficient ? 'blue' : 'orange'}\n        value={\n          available > 0 ? (\n            `${formatDecimal(available)}`\n          ) : (\n            <Text\n              c='red'\n              style={{ fontStyle: 'italic' }}\n            >{t`No stock available`}</Text>\n          )\n        }\n        title={t`Available Stock`}\n        extra={extra}\n      />\n    );\n  }, []);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      PartColumn({\n        accessor: 'bom_item',\n        part: 'part_detail',\n        ordering: 'part',\n        sortable: true,\n        switchable: false,\n        render: (record: any) => {\n          const hasAllocatedItems = record.allocatedQuantity > 0;\n\n          return (\n            <Group wrap='nowrap'>\n              <RowExpansionIcon\n                enabled={hasAllocatedItems}\n                expanded={table.isRowExpanded(record.pk)}\n              />\n              <RenderPartColumn part={record.part_detail} />\n            </Group>\n          );\n        }\n      }),\n      {\n        accessor: 'part_detail.IPN',\n        sortable: false,\n        title: t`IPN`\n      },\n      DescriptionColumn({\n        accessor: 'part_detail.description'\n      }),\n      {\n        accessor: 'bom_item_detail.reference',\n        ordering: 'reference',\n        sortable: true,\n        title: t`Reference`\n      },\n      BooleanColumn({\n        accessor: 'bom_item_detail.optional',\n        ordering: 'optional',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.consumable',\n        ordering: 'consumable',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.allow_variants',\n        ordering: 'allow_variants',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.inherited',\n        ordering: 'inherited',\n        title: t`Gets Inherited`,\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'part_detail.trackable',\n        ordering: 'trackable',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      {\n        accessor: 'bom_item_detail.quantity',\n        sortable: true,\n        title: t`Unit Quantity`,\n        defaultVisible: false,\n        ordering: 'unit_quantity',\n        render: (record: any) => {\n          return (\n            <Group justify='space-between' wrap='nowrap'>\n              <Text>{record.bom_item_detail?.quantity}</Text>\n              {record?.part_detail?.units && (\n                <Text size='xs'>[{record.part_detail.units}]</Text>\n              )}\n            </Group>\n          );\n        }\n      },\n      {\n        accessor: 'quantity',\n        title: t`Required Quantity`,\n        sortable: true,\n        defaultVisible: false,\n        switchable: false,\n        render: (record: any) => {\n          // Include information about the BOM item (if available)\n          const extra: any[] = [];\n\n          if (record?.bom_item_detail?.setup_quantity) {\n            extra.push(\n              <Text key='setup-quantity' size='sm'>\n                {t`Setup Quantity`}:{' '}\n                {formatDecimal(record.bom_item_detail.setup_quantity)}\n              </Text>\n            );\n          }\n\n          if (record?.bom_item_detail?.attrition) {\n            extra.push(\n              <Text key='attrition' size='sm'>\n                {t`Attrition`}: {record.bom_item_detail.attrition}%\n              </Text>\n            );\n          }\n\n          if (record?.bom_item_detail?.rounding_multiple) {\n            extra.push(\n              <Text key='rounding-multiple' size='sm'>\n                {t`Rounding Multiple`}:{' '}\n                {record.bom_item_detail.rounding_multiple}\n              </Text>\n            );\n          }\n\n          // If a build output is specified, use the provided quantity\n          return (\n            <TableHoverCard\n              title={t`BOM Information`}\n              extra={extra}\n              value={\n                <Group justify='space-between' wrap='nowrap'>\n                  <Text>{formatDecimal(record.requiredQuantity)}</Text>\n                  {record?.part_detail?.units && (\n                    <Text size='xs'>[{record.part_detail.units}]</Text>\n                  )}\n                </Group>\n              }\n            />\n          );\n        }\n      },\n      {\n        accessor: 'available_stock',\n        sortable: true,\n        switchable: false,\n        render: renderAvailableColumn\n      },\n      {\n        accessor: 'in_production',\n        render: (record: any) => {\n          if (record.scheduled_to_build > 0) {\n            return (\n              <ProgressBar\n                progressLabel={true}\n                value={record.in_production}\n                maximum={record.scheduled_to_build}\n              />\n            );\n          } else {\n            return record.part_detail?.is_assembly ? 0 : '-';\n          }\n        }\n      },\n      DecimalColumn({\n        accessor: 'on_order',\n        defaultVisible: false\n      }),\n      {\n        accessor: 'allocated',\n        switchable: false,\n        sortable: true,\n        hidden: !isActive,\n        minWidth: 125,\n        render: (record: any) => {\n          if (record?.bom_item_detail?.consumable) {\n            return (\n              <Text\n                size='sm'\n                style={{ fontStyle: 'italic' }}\n              >{t`Consumable item`}</Text>\n            );\n          }\n\n          const allocated = record.allocatedQuantity ?? 0;\n          let required = Math.max(0, record.quantity - record.consumed);\n\n          if (output?.pk) {\n            // If an output is specified, we show the allocated quantity for that output\n            required = record.bom_item_detail?.quantity;\n          }\n\n          if (allocated <= 0 && required <= 0) {\n            return (\n              <Group gap='xs' wrap='nowrap'>\n                <IconCircleCheck size={16} color='green' />\n                <Text size='sm' style={{ fontStyle: 'italic' }}>\n                  {record.consumed >= record.quantity\n                    ? t`Fully consumed`\n                    : t`Fully allocated`}\n                </Text>\n              </Group>\n            );\n          }\n\n          return (\n            <ProgressBar\n              progressLabel={true}\n              value={allocated}\n              maximum={required}\n            />\n          );\n        }\n      },\n      {\n        accessor: 'consumed',\n        sortable: true,\n        hidden: !!output?.pk,\n        minWidth: 125,\n        render: (record: any) => {\n          return record?.bom_item_detail?.consumable ? (\n            <Text style={{ fontStyle: 'italic' }}>{t`Consumable item`}</Text>\n          ) : (\n            <ProgressBar\n              progressLabel={true}\n              value={record.consumed}\n              maximum={record.requiredQuantity}\n            />\n          );\n        }\n      }\n    ];\n  }, [hasOutput, isActive, table, output]);\n\n  const buildOrderFields = useBuildOrderFields({\n    create: true,\n    modalId: 'new-build-order'\n  });\n\n  const [initialData, setInitialData] = useState<any>({});\n\n  const [selectedLine, setSelectedLine] = useState<number | null>(null);\n\n  const [selectedRows, setSelectedRows] = useState<any[]>([]);\n\n  const newBuildOrder = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_list,\n    title: t`Create Build Order`,\n    fields: buildOrderFields,\n    modalId: 'new-build-order',\n    initialData: initialData,\n    follow: true,\n    modelType: ModelType.build\n  });\n\n  const autoAllocateStock = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_auto_allocate,\n    pk: build.pk,\n    title: t`Allocate Stock`,\n    fields: {\n      location: {\n        filters: {\n          structural: false\n        }\n      },\n      exclude_location: {},\n      interchangeable: {},\n      substitutes: {},\n      optional_items: {}\n    },\n    initialData: {\n      location: build.take_from,\n      interchangeable: true,\n      substitutes: true,\n      optional_items: false\n    },\n    successMessage: t`Auto allocation in progress`,\n    table: table,\n    preFormContent: (\n      <Alert color='green' title={t`Auto Allocate Stock`}>\n        <Text>{t`Automatically allocate stock to this build according to the selected options`}</Text>\n      </Alert>\n    )\n  });\n\n  const allocateStock = useAllocateStockToBuildForm({\n    build: build,\n    output: output,\n    outputId: output?.pk ?? null,\n    buildId: build.pk,\n    lineItems: selectedRows,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const deallocateStock = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_deallocate,\n    pk: build.pk,\n    title: t`Deallocate Stock`,\n    fields: {\n      build_line: {\n        hidden: true\n      },\n      output: {\n        hidden: true\n      }\n    },\n    initialData: {\n      build_line: selectedLine,\n      output: output?.pk ?? null\n    },\n    preFormContent: (\n      <Alert color='red' title={t`Deallocate Stock`}>\n        {selectedLine == undefined ? (\n          <Text>{t`Deallocate all untracked stock for this build order`}</Text>\n        ) : (\n          <Text>{t`Deallocate stock from the selected line item`}</Text>\n        )}\n      </Alert>\n    ),\n    successMessage: t`Stock has been deallocated`,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const [selectedAllocation, setSelectedAllocation] = useState<number>(0);\n\n  const editAllocation = useEditApiFormModal({\n    url: ApiEndpoints.build_item_list,\n    pk: selectedAllocation,\n    title: t`Edit Stock Allocation`,\n    fields: {\n      stock_item: {\n        disabled: true\n      },\n      quantity: {}\n    },\n    onFormSuccess: table.refreshTable\n  });\n\n  const deleteAllocation = useDeleteApiFormModal({\n    url: ApiEndpoints.build_item_list,\n    pk: selectedAllocation,\n    title: t`Delete Stock Allocation`,\n    onFormSuccess: table.refreshTable\n  });\n\n  const [partsToOrder, setPartsToOrder] = useState<any[]>([]);\n\n  const orderPartsWizard = OrderPartsWizard({\n    parts: partsToOrder\n  });\n\n  const consumeLines = useConsumeBuildLinesForm({\n    buildId: build.pk,\n    buildLines: selectedRows,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      const part = record.part_detail ?? {};\n      const in_production = build.status == buildStatus.PRODUCTION;\n      const consumable: boolean = record.bom_item_detail?.consumable ?? false;\n      const trackable: boolean = part?.trackable ?? false;\n\n      const hasOutput: boolean = !!output?.pk;\n\n      const required = Math.max(\n        0,\n        record.quantity - record.consumed - record.allocated\n      );\n\n      // Can consume\n      const canConsume =\n        in_production &&\n        !consumable &&\n        !trackable &&\n        record.allocated > 0 &&\n        user.hasChangeRole(UserRoles.build);\n\n      // Can allocate\n      const canAllocate =\n        in_production &&\n        !consumable &&\n        user.hasChangeRole(UserRoles.build) &&\n        required > 0 &&\n        record.trackable == hasOutput;\n\n      // Can de-allocate\n      const canDeallocate =\n        in_production &&\n        !consumable &&\n        user.hasChangeRole(UserRoles.build) &&\n        record.allocated > 0 &&\n        record.trackable == hasOutput;\n\n      const canOrder =\n        !consumable &&\n        user.hasAddRole(UserRoles.purchase_order) &&\n        part.purchaseable;\n\n      const canBuild =\n        !consumable && user.hasAddRole(UserRoles.build) && part.assembly;\n\n      return [\n        {\n          icon: <IconArrowRight />,\n          title: t`Allocate Stock`,\n          hidden: !canAllocate,\n          color: 'green',\n          onClick: () => {\n            setSelectedRows([record]);\n            allocateStock.open();\n          }\n        },\n        {\n          icon: <IconCircleDashedCheck />,\n          title: t`Consume Stock`,\n          color: 'green',\n          hidden: !canConsume || hasOutput,\n          onClick: () => {\n            setSelectedRows([record]);\n            consumeLines.open();\n          }\n        },\n        {\n          icon: <IconCircleMinus />,\n          title: t`Deallocate Stock`,\n          hidden: !canDeallocate,\n          color: 'red',\n          onClick: () => {\n            setSelectedLine(record.pk);\n            deallocateStock.open();\n          }\n        },\n        {\n          icon: <IconShoppingCart />,\n          title: t`Order Stock`,\n          hidden: !canOrder,\n          color: 'blue',\n          onClick: () => {\n            setPartsToOrder([record.part_detail]);\n            orderPartsWizard.openWizard();\n          }\n        },\n        {\n          icon: <IconTool />,\n          title: t`Build Stock`,\n          hidden: !canBuild,\n          color: 'blue',\n          onClick: () => {\n            setInitialData({\n              part: record.part,\n              parent: build.pk,\n              quantity: record.quantity - record.allocated\n            });\n            newBuildOrder.open();\n          }\n        },\n        RowViewAction({\n          title: t`View Part`,\n          modelType: ModelType.part,\n          modelId: record.part,\n          navigate: navigate\n        })\n      ];\n    },\n    [user, navigate, output, build, buildStatus]\n  );\n\n  const tableActions = useMemo(() => {\n    const production = build.status == buildStatus.PRODUCTION;\n    const canEdit = user.hasChangeRole(UserRoles.build);\n    const visible = production && canEdit;\n    return [\n      <ActionButton\n        key='auto-allocate'\n        icon={<IconWand />}\n        tooltip={t`Auto Allocate Stock`}\n        hidden={!visible || hasOutput}\n        color='blue'\n        onClick={() => {\n          autoAllocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='order-parts'\n        hidden={!user.hasAddRole(UserRoles.purchase_order)}\n        disabled={!table.hasSelectedRecords}\n        icon={<IconShoppingCart />}\n        color='blue'\n        tooltip={t`Order Parts`}\n        onClick={() => {\n          setPartsToOrder(\n            table.selectedRecords\n              .filter(\n                (r) => r.part_detail?.purchaseable && r.part_detail?.active\n              )\n              .map((r) => r.part_detail)\n          );\n          orderPartsWizard.openWizard();\n        }}\n      />,\n      <ActionButton\n        key='allocate-stock'\n        icon={<IconArrowRight />}\n        tooltip={t`Allocate Stock`}\n        hidden={!visible}\n        disabled={!table.hasSelectedRecords}\n        color='green'\n        onClick={() => {\n          let rows = table.selectedRecords\n            .filter((r) => r.allocatedQuantity < r.requiredQuantity)\n            .filter((r) => !r.bom_item_detail?.consumable);\n\n          if (hasOutput) {\n            rows = rows.filter((r) => r.trackable);\n          } else {\n            rows = rows.filter((r) => !r.trackable);\n          }\n\n          setSelectedRows(rows);\n          allocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='deallocate-stock'\n        icon={<IconCircleMinus />}\n        tooltip={t`Deallocate Stock`}\n        hidden={!visible || hasOutput}\n        disabled={table.hasSelectedRecords}\n        color='red'\n        onClick={() => {\n          setSelectedLine(null);\n          deallocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='consume-stock'\n        icon={<IconCircleDashedCheck />}\n        tooltip={t`Consume Stock`}\n        hidden={!visible || hasOutput}\n        disabled={!table.hasSelectedRecords}\n        color='green'\n        onClick={() => {\n          setSelectedRows(table.selectedRecords);\n          consumeLines.open();\n        }}\n      />\n    ];\n  }, [\n    user,\n    build,\n    buildStatus,\n    hasOutput,\n    table.hasSelectedRecords,\n    table.selectedRecords\n  ]);\n\n  /**\n   * Format the records for the table, before rendering\n   *\n   * - Filter the \"allocations\" field to only show allocations for the selected output\n   * - Pre-calculate the \"requiredQuantity\" and \"allocatedQuantity\" fields\n   */\n  const formatRecords = useCallback(\n    (records: any[]): any[] => {\n      return records.map((record) => {\n        let allocations = [...record.allocations];\n\n        // If an output is specified, filter the allocations to only show those for the selected output\n        if (output?.pk) {\n          allocations = allocations.filter((a) => a.install_into == output.pk);\n        }\n\n        let allocatedQuantity = 0;\n        let requiredQuantity = record.quantity;\n\n        // Calculate the total allocated quantity\n        allocations.forEach((a) => {\n          allocatedQuantity += a.quantity;\n        });\n\n        // Calculate the required quantity (based on the build output)\n        if (output?.quantity && record.bom_item_detail) {\n          requiredQuantity = output.quantity * record.bom_item_detail.quantity;\n        }\n\n        return {\n          ...record,\n          filteredAllocations: allocations,\n          requiredQuantity: requiredQuantity,\n          allocatedQuantity: allocatedQuantity\n        };\n      });\n    },\n    [output]\n  );\n\n  // Control row expansion\n  const rowExpansion: DataTableRowExpansionProps<any> = useMemo(() => {\n    return {\n      allowMultiple: true,\n      expandable: ({ record }: { record: any }) => {\n        // Only items with allocated stock can be expanded\n        return table.isRowExpanded(record.pk) || record.allocatedQuantity > 0;\n      },\n      content: ({ record }: { record: any }) => {\n        return (\n          <BuildLineSubTable\n            lineItem={record}\n            onEditAllocation={(pk: number) => {\n              setSelectedAllocation(pk);\n              editAllocation.open();\n            }}\n            onDeleteAllocation={(pk: number) => {\n              setSelectedAllocation(pk);\n              deleteAllocation.open();\n            }}\n          />\n        );\n      }\n    };\n  }, [table.isRowExpanded, output]);\n\n  return (\n    <>\n      {autoAllocateStock.modal}\n      {newBuildOrder.modal}\n      {allocateStock.modal}\n      {deallocateStock.modal}\n      {editAllocation.modal}\n      {deleteAllocation.modal}\n      {consumeLines.modal}\n      {orderPartsWizard.wizard}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.build_line_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          params: {\n            ...params,\n            build: build.pk,\n            assembly_detail: false,\n            part_detail: true\n          },\n          tableActions: tableActions,\n          tableFilters: tableFilters,\n          rowActions: rowActions,\n          dataFormatter: formatRecords,\n          enableDownload: true,\n          enableSelection: true,\n          enableLabels: true,\n          modelType: ModelType.buildline,\n          detailAction: false,\n          onCellClick: () => {},\n          rowExpansion: rowExpansion\n        }}\n      />\n    </>\n  );\n}\n"],"names":["__iconNode","IconWand","createReactComponent","PartTestResultTable","buildId","partId","tableName","useMemo","table","useTable","api","useApi","data","testTemplates","useQuery","queryKey","queryFn","get","apiUrl","ApiEndpoints","part_test_template_list","params","part","include_inherited","enabled","required","then","res","useEffect","refreshTable","selectedOutput","setSelectedOutput","useState","selectedTemplate","setSelectedTemplate","undefined","testResultFields","useTestResultFields","itemId","templateId","createTestResult","useCreateApiFormModal","url","stock_test_result_list","title","_i18n","_","id","fields","initialData","template","result","onFormSuccess","successMessage","multipleTestResultFields","attachment","stock_item","disabled","generateTestResults","useCallback","form","selectedRecords","map","record","pk","selectedIds","createTestResultMultiple","clearSelectedRecords","processFormData","testColumns","length","accessor","test_name","sortable","switchable","render","test","tests","filter","sort","a","b","shift","Group","jsx","Badge","Tooltip","ActionIcon","event","cancelEvent","open","IconCirclePlus","extra","value","push","jsxs","Text","notes","date","formatDate","user_detail","RenderUser","TableHoverCard","PassFailButton","tableColumns","PartColumn","full_name","ordering","serial","batch","quantity","LocationColumn","tableFilters","name","label","description","InStockFilter","SerialFilter","SerialGTEFilter","SerialLTEFilter","HasBatchCodeFilter","BatchFilter","IsSerializedFilter","choiceFunction","StatusFilterOptions","ModelType","stockitem","tableActions","AddItemButton","hasSelectedRecords","rowActions","icon","color","onClick","Fragment","modal","InvenTreeTable","stock_item_list","part_detail","location_detail","build","enableSelection","modelType","BuildLineSubTable","lineItem","onEditAllocation","onDeleteAllocation","user","useUserState","navigate","useNavigate","stock_item_detail","RowViewAction","modelId","RowEditAction","hidden","hasChangeRole","UserRoles","RowDeleteAction","hasDeleteRole","Paper","filteredAllocations","allocations","minHeight","enableSearch","enableRefresh","enableColumnSwitching","enableFilters","noRecordsText","BuildLineTable","output","buildStatus","useStatusCodes","hasOutput","isActive","status","PRODUCTION","PENDING","ON_HOLD","renderAvailableColumn","bom_item","bom_item_detail","available","available_stock","available_substitute_stock","allow_variants","available_variant_stock","in_production","formatDecimal","on_order","external_stock","sufficient","allocated","fontStyle","hasAllocatedItems","allocatedQuantity","RowExpansionIcon","isRowExpanded","RenderPartColumn","DescriptionColumn","BooleanColumn","defaultVisible","units","setup_quantity","attrition","rounding_multiple","requiredQuantity","scheduled_to_build","ProgressBar","is_assembly","DecimalColumn","minWidth","consumable","Math","max","consumed","IconCircleCheck","buildOrderFields","useBuildOrderFields","create","modalId","setInitialData","selectedLine","setSelectedLine","selectedRows","setSelectedRows","newBuildOrder","build_order_list","follow","autoAllocateStock","build_order_auto_allocate","location","filters","structural","exclude_location","interchangeable","substitutes","optional_items","take_from","preFormContent","Alert","allocateStock","useAllocateStockToBuildForm","outputId","lineItems","deallocateStock","build_order_deallocate","build_line","selectedAllocation","setSelectedAllocation","editAllocation","useEditApiFormModal","build_item_list","deleteAllocation","useDeleteApiFormModal","partsToOrder","setPartsToOrder","orderPartsWizard","OrderPartsWizard","parts","consumeLines","useConsumeBuildLinesForm","buildLines","trackable","canConsume","canAllocate","canDeallocate","canOrder","hasAddRole","purchase_order","purchaseable","canBuild","assembly","IconArrowRight","IconCircleDashedCheck","IconCircleMinus","IconShoppingCart","openWizard","IconTool","parent","production","canEdit","visible","ActionButton","r","active","rows","formatRecords","records","install_into","forEach","rowExpansion","allowMultiple","expandable","content","wizard","build_line_list","assembly_detail","dataFormatter","enableDownload","enableLabels","buildline","detailAction","onCellClick"],"mappings":"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","x_google_ignoreList":[0]}