import{ag as I,r as o,ab as t,ao as s,aO as n,j as a,an as y,b5 as x,bc as i,c8 as j,S as F,aD as g}from"./index-DO3Hsv6V.js";import{A as w}from"./AdminButton-CTeciGXm.js";import{I as T,D as M,a as E}from"./InstanceDetail-BstmafrN.js";import{D as K,A as v,N as U}from"./NotesPanel-VH2wpJwF.js";import{u as W,R as q,a as G,I as O,O as B,b as Q,E as Y,D as $}from"./InvenTreeTable-C52lfANx.js";import{P as H}from"./PageDetail-CKIqCwOW.js";import{P as V}from"./PanelGroup-DXB_Pzm0.js";import{b as X,u as Z}from"./CompanyForms-DsVXw3Bg.js";import{c as D,j as A,e as C,m as L}from"./Filter-BvEUIFlz.js";import{u as z}from"./UseInstance-DbCdugSa.js";import{S as J,I as ee}from"./SupplierPartTable-CxdjsfY5.js";import{S as ae}from"./StockItemTable-CaVBJXX_.js";import{a1 as te,a as re,y as ie,aq as se,k as ne}from"./ThemeContext-CGjWYKat.js";import"./ActionButton-B71_UNIq.js";import"./index-B0vyf6qM.js";import"./YesNoButton-COjRQttb.js";import"./DesktopAppView-Bz_M7PvN.js";import"./formatters-t5SuiB19.js";import"./ModelType-DvEnjMmO.js";import"./GenericErrorPage-DxYcKmpr.js";import"./NotFound-BpMmyLUk.js";import"./PermissionDenied-CwPe-5Cn.js";import"./use-hover-DV0QPCnC.js";import"./index-Chjiymov.js";import"./AttachmentLink-Nv2Vdpsp.js";import"./IconChevronDown-XhYR5VVP.js";import"./QRCode-D-HsAD7c.js";import"./browser-4FjMziNK.js";import"./IconDotsVertical-B3NOsJOQ.js";import"./IconTags-3mllzNAC.js";import"./PageTitle-BblRCqjC.js";import"./PluginUIFeature-r-ecmONx.js";import"./RemoteComponent-RGte6E6x.js";import"./IconAt-CdV2rdTD.js";import"./ImportPartWizard-il413wsr.js";import"./OrderPartsWizard-CSVtVPb4.js";import"./IconUsers-_4Wxu47r.js";import"./IconAddressBook-BXunpTP_.js";import"./ColumnRenderers-B590lN_v.js";import"./UsePlugins-I0CK0aga.js";import"./UseStockAdjustActions-BtnC3twz.js";function oe({params:m}){const r=W("manufacturer-part-parameter"),l=I(),e=o.useMemo(()=>[{accessor:"name",title:t._({id:"6YtxFj"}),sortable:!0,switchable:!1},{accessor:"value",title:t._({id:"wMHvYH"}),sortable:!0,switchable:!1},{accessor:"units",title:t._({id:"QrhaVg"}),sortable:!1,switchable:!0}],[]),p=X(),[c,f]=o.useState(void 0),_=D({url:s.manufacturer_part_parameter_list,title:t._({id:"WrK5aa"}),fields:p,table:r,initialData:{manufacturer_part:m.manufacturer_part}}),d=A({url:s.manufacturer_part_parameter_list,pk:c,title:t._({id:"FDjidN"}),fields:p,table:r}),u=C({url:s.manufacturer_part_parameter_list,pk:c,title:t._({id:"qSo+g1"}),table:r}),h=o.useCallback(k=>[q({hidden:!l.hasChangeRole(n.purchase_order),onClick:()=>{f(k.pk),d.open()}}),G({hidden:!l.hasDeleteRole(n.purchase_order),onClick:()=>{f(k.pk),u.open()}})],[l]),b=o.useMemo(()=>[a.jsx(L,{tooltip:t._({id:"WrK5aa"}),onClick:()=>{_.open()},hidden:!l.hasAddRole(n.purchase_order)},"add-parameter")],[l]);return a.jsxs(a.Fragment,{children:[_.modal,d.modal,u.modal,a.jsx(O,{url:y(s.manufacturer_part_parameter_list),tableState:r,columns:e,props:{params:{...m},rowActions:h,tableActions:b}})]})}function Xe(){const{id:m}=te(),r=I(),l=re(),{instance:e,instanceQuery:p,refreshInstance:c}=z({endpoint:s.manufacturer_part_list,pk:m,hasPrimaryKey:!0,params:{part_detail:!0,manufacturer_detail:!0}}),f=o.useMemo(()=>{if(p.isFetching)return a.jsx(x,{});const P=e??{},R=[{type:"link",name:"part",label:t._({id:"GNd5ad"}),model:i.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:t._({id:"3wXEsN"}),copy:!0,icon:"serial",hidden:!P.part_detail?.IPN},{type:"string",name:"part_detail.description",label:t._({id:"Nu4oKW"}),copy:!0,icon:"info",hidden:!e.description}],N=[{type:"link",name:"manufacturer",label:t._({id:"+m9/3S"}),icon:"manufacturers",model:i.company,hidden:!e.manufacturer},{type:"string",name:"MPN",label:t._({id:"ZCCuT2"}),copy:!0,hidden:!e.MPN,icon:"reference"},{type:"string",name:"description",label:t._({id:"Nu4oKW"}),copy:!0,hidden:!e.description,icon:"info"},{type:"link",external:!0,name:"link",label:t._({id:"0R4wMK"}),copy:!0,hidden:!e.link}];return a.jsxs(T,{children:[a.jsxs(j,{grow:!0,children:[a.jsx(K,{appRole:n.part,src:e?.part_detail?.image,apiPath:y(s.part_list,e?.part_detail?.pk),pk:e?.part_detail?.pk}),a.jsx(j.Col,{span:{base:12,sm:8},children:a.jsx(M,{title:t._({id:"sQRZ1+"}),fields:R,item:P})})]}),a.jsx(M,{title:t._({id:"BCSxrX"}),fields:N,item:P})]})},[e,p]),_=o.useMemo(()=>[{name:"details",label:t._({id:"uN9giG"}),icon:a.jsx(ie,{}),content:f},{name:"parameters",label:t._({id:"F18WP3"}),icon:a.jsx(se,{}),content:e?.pk?a.jsx(oe,{params:{manufacturer_part:e.pk}}):a.jsx(x,{})},{name:"stock",label:t._({id:"b447qM"}),hidden:!r.hasViewRole(n.stock),icon:a.jsx(ne,{}),content:a.jsx(ae,{tableName:"manufacturer-part-stock",params:{manufacturer_part:m}})},{name:"suppliers",label:t._({id:"9RecCt"}),icon:a.jsx(ee,{}),content:e?.pk?a.jsx(J,{partId:e.part,manufacturerId:e.manufacturer,manufacturerPartId:e.pk}):a.jsx(x,{})},v({model_type:i.manufacturerpart,model_id:e?.pk}),U({model_type:i.manufacturerpart,model_id:e?.pk})],[r,e]),d=Z(),u=A({url:s.manufacturer_part_list,pk:e?.pk,title:t._({id:"b30yxS"}),fields:d,onFormSuccess:c}),h=D({url:s.manufacturer_part_list,title:t._({id:"uOeMYf"}),fields:d,initialData:{...e},follow:!0,modelType:i.manufacturerpart}),b=C({url:s.manufacturer_part_list,pk:e?.pk,title:t._({id:"fMDrRl"}),onFormSuccess:()=>{l(g(i.part,e.part))}}),k=o.useMemo(()=>[a.jsx(w,{model:i.manufacturerpart,id:e.pk},"admin"),a.jsx(B,{tooltip:t._({id:"D/ppgk"}),actions:[Q({hidden:!r.hasAddRole(n.purchase_order),onClick:()=>h.open()}),Y({hidden:!r.hasChangeRole(n.purchase_order),onClick:()=>u.open()}),$({hidden:!r.hasDeleteRole(n.purchase_order),onClick:()=>b.open()})]},"options")],[r,e]),S=o.useMemo(()=>[{name:t._({id:"UOTpFa"}),url:"/purchasing/"},{name:e?.manufacturer_detail?.name??t._({id:"+m9/3S"}),url:`/purchasing/manufacturer/${e?.manufacturer_detail?.pk}/`}],[e]);return a.jsxs(a.Fragment,{children:[b.modal,h.modal,u.modal,a.jsx(E,{query:p,requiredPermission:i.manufacturerpart,children:a.jsxs(F,{gap:"xs",children:[a.jsx(H,{title:t._({id:"bisS0I"}),subtitle:`${e.MPN} - ${e.part_detail?.name}`,breadcrumbs:S,lastCrumb:[{name:e.MPN,url:g(i.manufacturerpart,e.pk)}],actions:k,imageUrl:e?.part_detail?.thumbnail,editAction:u.open,editEnabled:r.hasChangePermission(i.manufacturerpart)}),a.jsx(V,{pageKey:"manufacturerpart",panels:_,instance:e,reloadInstance:c,model:i.manufacturerpart,id:e.pk})]})})]})}export{Xe as default};
//# sourceMappingURL=ManufacturerPartDetail-MukBgEJu.js.map
